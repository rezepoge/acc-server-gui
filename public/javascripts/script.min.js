"use strict";const elems={addSessionButton:document.getElementById("addSession"),removeSessionButton:document.getElementById("removeSession"),sessionsWrapper:document.getElementById("sessions"),sessions:document.getElementsByClassName("session"),saveButton:document.getElementById("save"),restartButton:document.getElementById("restart"),startButton:document.getElementById("start"),stopButton:document.getElementById("stop"),status:document.getElementById("status")},inputElems={serverName:document.getElementById("serverName"),password:document.getElementById("password"),adminPassword:document.getElementById("adminPassword"),spectatorPassword:document.getElementById("spectatorPassword"),centralEntryListPath:document.getElementById("centralEntryListPath"),carGroup:document.getElementById("carGroup"),maxCarSlots:document.getElementById("maxCarSlots"),trackMedalsRequirement:document.getElementById("trackMedalsRequirement"),safetyRatingRequirement:document.getElementById("safetyRatingRequirement"),racecraftRatingRequirement:document.getElementById("racecraftRatingRequirement"),maxConnections:document.getElementById("maxConnections"),udpPort:document.getElementById("udpPort"),tcpPort:document.getElementById("tcpPort"),registerToLobby:document.getElementById("registerToLobby"),isRaceLocked:document.getElementById("isRaceLocked"),shortFormationLap:document.getElementById("shortFormationLap"),dumpLeaderboards:document.getElementById("dumpLeaderboards"),dumpEntryList:document.getElementById("dumpEntryList"),randomizeTrackWhenEmpty:document.getElementById("randomizeTrackWhenEmpty"),allowAutoDQ:document.getElementById("allowAutoDQ"),formationLapType:document.getElementById("formationLapType"),track:document.getElementById("track"),preRaceWaitingTimeSeconds:document.getElementById("preRaceWaitingTimeSeconds"),sessionOverTimeSeconds:document.getElementById("sessionOverTimeSeconds"),postQualySeconds:document.getElementById("postQualySeconds"),postRaceSeconds:document.getElementById("postRaceSeconds"),pitWindowLengthSec:document.getElementById("pitWindowLengthSec"),driverStintTimeSec:document.getElementById("driverStintTimeSec"),mandatoryPitstopCount:document.getElementById("mandatoryPitstopCount"),maxTotalDrivingTime:document.getElementById("maxTotalDrivingTime"),maxDriversCount:document.getElementById("maxDriversCount"),isRefuellingAllowedInRace:document.getElementById("isRefuellingAllowedInRace"),isRefuellingTimeFixed:document.getElementById("isRefuellingTimeFixed"),isMandatoryPitstopRefuellingRequired:document.getElementById("isMandatoryPitstopRefuellingRequired"),isMandatoryPitstopTyreChangeRequired:document.getElementById("isMandatoryPitstopTyreChangeRequired"),isMandatoryPitstopSwapDriverRequired:document.getElementById("isMandatoryPitstopSwapDriverRequired"),ambientTemp:document.getElementById("ambientTemp"),cloudLevel:document.getElementById("cloudLevel"),rain:document.getElementById("rain"),weatherRandomness:document.getElementById("weatherRandomness"),disableIdealLine:document.getElementById("disableIdealLine"),disableAutosteer:document.getElementById("disableAutosteer"),disableAutoPitLimiter:document.getElementById("disableAutoPitLimiter"),disableAutoGear:document.getElementById("disableAutoGear"),disableAutoEngineStart:document.getElementById("disableAutoEngineStart"),disableAutoWiper:document.getElementById("disableAutoWiper"),disableAutoLights:document.getElementById("disableAutoLights"),disableAutoClutch:document.getElementById("disableAutoClutch"),stabilityControlLevelMax:document.getElementById("stabilityControlLevelMax")};elems.addSessionButton.addEventListener("click",ev=>{const sessionElem=document.createElement("div");sessionElem.className="session",sessionElem.innerHTML=elems.sessions[0].innerHTML.replace(/_[\d+$]/g,`_${elems.sessions.length}`),elems.sessionsWrapper.append(sessionElem)}),elems.removeSessionButton.addEventListener("click",ev=>{elems.sessions.length>1&&elems.sessionsWrapper.removeChild(elems.sessionsWrapper.lastChild)}),elems.saveButton.addEventListener("click",ev=>{fetch("save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(mapElementValues())}).then(()=>{document.body.style.cursor="progress",setTimeout(()=>{document.body.style.cursor="default",window.location.href="/"},500)}).catch(console.error)}),elems.restartButton.addEventListener("click",ev=>{fetch("/service/restart")}),elems.startButton.addEventListener("click",ev=>{fetch("/service/start")}),elems.stopButton.addEventListener("click",ev=>{fetch("/service/stop")});const getStatus=()=>{elems.status.style.color="#CCCCCC",fetch("/service/status").then(response=>response.json()).then(json=>{elems.status.innerText=json.status,elems.status.style.color="#FFFFFF"})};function mapElementValues(){return{settings:{serverName:inputElems.serverName.value,password:inputElems.password.value,adminPassword:inputElems.adminPassword.value,spectatorPassword:inputElems.spectatorPassword.value,centralEntryListPath:inputElems.centralEntryListPath.value,carGroup:inputElems.carGroup.value,maxCarSlots:parseInt(inputElems.maxCarSlots.value),trackMedalsRequirement:parseInt(inputElems.trackMedalsRequirement.value),safetyRatingRequirement:parseInt(inputElems.safetyRatingRequirement.value),racecraftRatingRequirement:parseInt(inputElems.racecraftRatingRequirement.value),isRaceLocked:!0===inputElems.isRaceLocked.checked?1:0,shortFormationLap:!0===inputElems.shortFormationLap.checked?1:0,dumpLeaderboards:!0===inputElems.dumpLeaderboards.checked?1:0,dumpEntryList:!0===inputElems.dumpEntryList.checked?1:0,randomizeTrackWhenEmpty:!0===inputElems.randomizeTrackWhenEmpty.checked?1:0,allowAutoDQ:!0===inputElems.allowAutoDQ.checked?1:0,formationLapType:parseInt(inputElems.formationLapType.value)},event:{track:inputElems.track.value,preRaceWaitingTimeSeconds:parseInt(inputElems.preRaceWaitingTimeSeconds.value),sessionOverTimeSeconds:parseInt(inputElems.sessionOverTimeSeconds.value),postQualySeconds:parseInt(inputElems.postQualySeconds.value),postRaceSeconds:parseInt(inputElems.postRaceSeconds.value),ambientTemp:parseInt(inputElems.ambientTemp.value),cloudLevel:parseFloat(inputElems.cloudLevel.value),rain:parseFloat(inputElems.rain.value),weatherRandomness:parseInt(inputElems.weatherRandomness.value),sessions:Array.from(elems.sessions).map((elem,index)=>({sessionType:document.getElementById("sessionType_"+index).value,dayOfWeekend:parseInt(document.getElementById("dayOfWeekend_"+index).value),hourOfDay:parseInt(document.getElementById("hourOfDay_"+index).value),timeMultiplier:parseInt(document.getElementById("timeMultiplier_"+index).value),sessionDurationMinutes:parseInt(document.getElementById("sessionDurationMinutes_"+index).value)}))},eventRules:{pitWindowLengthSec:parseInt(inputElems.pitWindowLengthSec.value),driverStintTimeSec:parseInt(inputElems.driverStintTimeSec.value),mandatoryPitstopCount:parseInt(inputElems.mandatoryPitstopCount.value),maxTotalDrivingTime:parseInt(inputElems.maxTotalDrivingTime.value),maxDriversCount:parseInt(inputElems.maxDriversCount.value),isRefuellingAllowedInRace:!0===inputElems.isRefuellingAllowedInRace.checked?1:0,isRefuellingTimeFixed:!0===inputElems.isRefuellingTimeFixed.checked?1:0,isMandatoryPitstopRefuellingRequired:!0===inputElems.isMandatoryPitstopRefuellingRequired.checked?1:0,isMandatoryPitstopTyreChangeRequired:!0===inputElems.isMandatoryPitstopTyreChangeRequired.checked?1:0,isMandatoryPitstopSwapDriverRequired:!0===inputElems.isMandatoryPitstopSwapDriverRequired.checked?1:0},assistRules:{disableIdealLine:!1===inputElems.disableIdealLine.checked?1:0,disableAutosteer:!1===inputElems.disableAutosteer.checked?1:0,disableAutoPitLimiter:!1===inputElems.disableAutoPitLimiter.checked?1:0,disableAutoGear:!1===inputElems.disableAutoGear.checked?1:0,disableAutoEngineStart:!1===inputElems.disableAutoEngineStart.checked?1:0,disableAutoWiper:!1===inputElems.disableAutoWiper.checked?1:0,disableAutoLights:!1===inputElems.disableAutoLights.checked?1:0,disableAutoClutch:!1===inputElems.disableAutoClutch.checked?1:0,stabilityControlLevelMax:parseInt(inputElems.stabilityControlLevelMax.value)},configuration:{registerToLobby:!0===inputElems.registerToLobby.checked?1:0,maxConnections:parseInt(inputElems.maxConnections.value),udpPort:parseInt(inputElems.udpPort.value),tcpPort:parseInt(inputElems.tcpPort.value)}}}getStatus(),setInterval(getStatus,15e3);
//# sourceMappingURL=script.min.js.map